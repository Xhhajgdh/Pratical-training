{"version":3,"sources":["webpack:///./src/views/driver/DriverOrderTable.vue","webpack:///./src/views/driver/DriverOrderTable.vue?2cd9"],"names":["style","class","type","findOneOrder","placeholder","search_address","clearable","icon","searchByName","data","tableData","header-cell-style","cell-style","ref","tooltip-effect","prop","label","width","default","scope","row","order_state","title","changeOrderState","order_id","order_tran","tran_id","order_driver","driver_id","reference","size","handleSizeChange","handleCurrentChange","current-page","currentPage","page-sizes","page-size","pageSize","layout","total","dialogVisible","footer","order_form","label-position","labelPosition","label-width","model","order_no","readonly","send_address","arrive_address","order_arrive_username","order_arrive_usertel","arrive_date","name","driver","JSON","parse","sessionStorage","getItem","dialogVisible2","upid","methods","load","request","get","params","this","then","res","list","val","console","log","put","success","message","code","created","render"],"mappings":"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","file":"js/chunk-2d221be6.4b273a11.js","sourcesContent":["<template>\r\n  <div style=\"padding-left: 10px\">\r\n    <!-- 搜索框和批量操作框 -->\r\n    <div style=\"margin-top: 20px;display: flex\">\r\n      <div>\r\n        <el-button type=\"success\" @click=\"findOneOrder\">进行中的运单</el-button>\r\n      </div>\r\n      <div style=\"flex: 1\"></div>\r\n      <div style=\"width: 270px;display: flex;margin-right: 20px\">\r\n        <el-input placeholder=\"请输入目的地\" v-model=\"search_address\" clearable></el-input>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" style=\"margin-left: 5px\" @click=\"searchByName\">搜索</el-button>\r\n      </div>\r\n    </div>\r\n    <!-- 表格  -->\r\n    <div style=\"margin: 10px\">\r\n      <el-table\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\"\r\n        :header-cell-style=\"{textAlign:'center'}\"\r\n        :cell-style=\"{textAlign:'center'}\"\r\n        ref=\"multipleTable\"\r\n        tooltip-effect=\"dark\">\r\n        <el-table-column prop=\"order_no\" label=\"运单号\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"send_date\" label=\"发货日期\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"arrive_date\" label=\"到货日期\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"order_create_date\" label=\"运单创建时间\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"order_customer.customer_name\" label=\"下单客户\" width=\"80\"></el-table-column>\r\n        <el-table-column prop=\"send_address\" label=\"发货地址\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"arrive_address\" label=\"收货地址\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"order_arrive_username\" label=\"收货人姓名\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"order_arrive_usertel\" label=\"收货人电话\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"order_money\" label=\"运费\" width=\"70\"></el-table-column>\r\n        <el-table-column prop=\"order_tran.tran_name\" label=\"运输工具\" width=\"70\"></el-table-column>\r\n        <el-table-column prop=\"order_state\" label=\"运单状态\" width=\"70\">\r\n          <template #default=\"scope\">\r\n            <span v-if=\"scope.row.order_state==0\" style=\"color: red\">待审核</span>\r\n            <span v-if=\"scope.row.order_state==1\" style=\"color: darkgoldenrod\">运输中</span>\r\n            <span v-if=\"scope.row.order_state==2\" style=\"color: green\">已到货</span>\r\n            <span v-if=\"scope.row.order_state==3\" style=\"color: salmon\">订单完成</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"100\">\r\n          <template #default=\"scope\">\r\n            <el-popconfirm v-if=\"scope.row.order_state!=3\" title=\"确定进行下一步吗？\"\r\n                           @confirm=\"changeOrderState(scope.row.order_id,scope.row.order_state,scope.row.order_tran.tran_id,scope.row.order_driver.driver_id)\">\r\n              <template #reference>\r\n                <el-button size=\"mini\" type=\"success\">下一步</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <div class=\"block\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[5, 10]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n    <!-- 弹窗 -->\r\n    <div>\r\n      <el-dialog title=\"添加用户\" v-model=\"dialogVisible\" width=\"35%\">\r\n        <div style=\"width: 350px;margin-left: 40px\">\r\n          <el-form :label-position=\"labelPosition\" label-width=\"100px\" :model=\"order_form\">\r\n            <el-form-item label=\"运单号\">\r\n              <el-input v-model=\"order_form.order_no\" readonly></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"发货地址\">\r\n              <el-input v-model=\"order_form.send_address\" readonly></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"目的地\">\r\n              <el-input v-model=\"order_form.arrive_address\" readonly></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"收货人姓名\">\r\n              <el-input v-model=\"order_form.order_arrive_username\" readonly></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"收货人电话\">\r\n              <el-input v-model=\"order_form.order_arrive_usertel\" readonly></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"运单到达时间\">\r\n              <el-input v-model=\"order_form.arrive_date\" readonly></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <template #footer>\r\n    <span class=\"dialog-footer\">\r\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\"\r\n                 @click=\"changeOrderState(order_form.order_id,order_form.order_state,order_form.order_tran.tran_id,order_form.order_driver.driver_id)\">下一步</el-button>\r\n    </span>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import request from \"../../utils/request\";\r\n  import {ElMessage} from \"element-plus\";\r\n\r\n  export default {\r\n    name: \"DriverOrderTable\",\r\n    data() {\r\n      return {\r\n        driver: JSON.parse(sessionStorage.getItem('driver')),\r\n        tableData: [],//表单数据\r\n        total: 0,//数据总数\r\n        pageSize: 5,//每页显示条数\r\n        currentPage: 1,//当前页数\r\n        search_address: '',\r\n        dialogVisible: false,//添加弹框默认不显示\r\n        dialogVisible2: false,//修改弹框默认不显示\r\n        order_form: {}, //正在进行的运单\r\n        upid: [], //用于存储修改状态所需id\r\n      }\r\n    },\r\n    methods: {\r\n      //发送数据请求\r\n      load() {\r\n        request.get('/api/DriverController/findOrderByDid', {\r\n          params: {\r\n            driver_id: this.driver.driver_id,\r\n            search_address: this.search_address,\r\n            currentPage: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        }).then(res => {\r\n          this.tableData = res.data.list\r\n          this.total = res.data.total\r\n          this.pageSize = res.data.pageSize\r\n          this.currentPage = res.data.currentPage\r\n        })\r\n      },\r\n      //改变每页条数\r\n      handleSizeChange(val) {\r\n        this.pageSize = val\r\n        this.load()\r\n      },\r\n      //改变当前页数\r\n      handleCurrentChange(val) {\r\n        this.currentPage = val\r\n        this.load()\r\n      },\r\n      //修改运单状态\r\n      changeOrderState(order_id, order_state, tran_id, driver_id) {\r\n        this.upid[0] = order_id\r\n        this.upid[1] = order_state\r\n        this.upid[2] = driver_id\r\n        this.upid[3] = tran_id\r\n\r\n        console.log(\"aa:\" + order_id + \"-\" + order_state + \"-\" + tran_id + \"-\" + driver_id)\r\n        request.put('/api/DriverController/changeOrderState', this.upid).then(res => {\r\n          this.load()\r\n          ElMessage.success({message: res.message, type: 'success'});\r\n        })\r\n        this.dialogVisible = false\r\n      },\r\n      searchByName() {  //搜索\r\n        this.load()\r\n      },\r\n      findOneOrder() {  //查询正在进行的运单\r\n        request.get('/api/DriverController/findOneOrder', {\r\n          params: {\r\n            driver_id: this.driver.driver_id\r\n          }\r\n        }).then(res => {\r\n          if (res.code == 0) {\r\n            this.order_form = res.data\r\n            this.dialogVisible = true\r\n          } else {\r\n            ElMessage.success({message: res.message, type: 'success'});\r\n          }\r\n        })\r\n      },\r\n    },\r\n    created() {\r\n      this.load()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./DriverOrderTable.vue?vue&type=template&id=61659b42\"\nimport script from \"./DriverOrderTable.vue?vue&type=script&lang=js\"\nexport * from \"./DriverOrderTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}